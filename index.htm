<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="pl" lang="pl"> 
	<head> 
		<meta http-equiv="Content-Type" content="text/html" charset="utf-8" />
		<title>CRUD Frontend Application</title> 
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script>
		<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.7/angular.min.js"></script>
		<script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular-animate.js"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
		
		<link href="https://fonts.googleapis.com/css?family=Lato&subset=latin-ext" rel="stylesheet"> 
		
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
		<link rel="stylesheet" href="http://flatlogic.github.io/awesome-bootstrap-checkbox/bower_components/Font-Awesome/css/font-awesome.css">
		<link href="css/style.css" rel="stylesheet" type="text/css" />		
		<link href="css/awesome-bootstrap-checkbox.css" rel="stylesheet" type="text/css" />		
	</head> 

	<body ng-app="CRUDApp">
		<div id="mainContent" ng-controller="CRUDAppController">
			<div id="tableHeader">
				<h2 id="tableName">Tabela nr 1</h2>
				<h4 id="tableDesc">
					Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam tempor eros convallis nisi vehicula gravida. Vivamus ultricies mi a risus egestas tempor. Donec mollis, nulla sit amet tempor vulputate, libero dui placerat libero, ultrices dapibus risus massa et urna. 
				</h4>
			</div>
			<div id="succMsg" class="msg" ng-show="succMsg!=''">
				{{succMsg}}
				<span class="close" href="#" ng-click="deleteMsg('succ')">[close]</span>
			</div>
			<div id="errMsg" class="msg" ng-show="errMsg!=''">
				{{errMsg}}
				<span class="close" href="#" ng-click="deleteMsg('err')">[close]</span>
			</div>
			<div id="formContent" ng-show="showForm">
				<form novalidate name="personForm">
					<span ng-init="initGlobalVariables()"></span>
					
					<crud-input 
						type="text"
						name="name"
						errormessages="errorMessages.name"
						model="person.name"
						assignparams="assignParams.name"
						change="assign(assgnprms)"
						valid="evalPattern(params)"
						validations="validations.name"
						desc="to jest opis pola name"
                        listenon="random">
						Name:
					</crud-input >
					
					<crud-input 
						type="text"
						name="surname"
						model="person.surname"
						errormessages="errorMessages.surname"
						assignparams="assignParams.surname"
						change="assign(assgnprms)" 
						valid="evalPattern(params)"
						validations="validations.surname"
                        listenon="random">
						Surname:
					</crud-input >
					
					<crud-input 
						type="text"
						name="pesel"
						model="person.pesel"
						errormessages="errorMessages.pesel"
						assignparams="assignParams.pesel"
						change="assign(assgnprms)" 
						valid="evalPattern(params)"
						validations="validations.pesel"
						updateon="blur"
						desc="to jest opis pola pesel"
                        listenon="random">
						Pesel:
					</crud-input >
					
					<crud-input 
						type="text"
						disabled="true"
						name="dateOfBirth"
						model="person.dateOfBirth"
						errormessages="errorMessages.dateOfBirth"
						assignparams="assignParams.dateOfBirth"
						change="assign(assgnprms)" 
						valid="evalPattern(params)"
						validations="validations.dateOfBirth"
						desc="to jest opis pola dateOfBirth"
                        listenon="random">
						Date of birth:
					</crud-input >
					
					<crud-input 
						type="number"
						name="salary"
						model="person.salary"
						errormessages="errorMessages.salary"
						assignparams="assignParams.salary"
						change="assign(assgnprms)" 
						updateon="blur"
						validations="validations.salary"
						desc="to jest opis pola salary"
                        listenon="random">
						Salary:
					</crud-input >
					
					<!--<div class="crud-formItem">
						<crud-label desc="This field will be filled automatically once you fill field 'pesel'">Sex:</crud-label>
						<select disabled='disabled' name="sex" ng-init="fieldsDefinitions.sex=[{'id':'male', 'name':'Male'}, {'id':'female', 'name':'Female'}]" ng-model="person.sex">
							<option></option>
							<option ng-repeat="item in fieldsDefinitions.sex" ng-selected="person.sex==item.id" value="{{item.id}}">
								{{item.name}}
							</option>
						</select>
					</div>-->
                    <crud-input
                        type="select"
                        name="sex"
                        model="person.sex"
                        errormessages="errorMessages.sex"
						assignparams="assignParams.sex"
						change="assign(assgnprms)" 
						valid="evalPattern(params)"	
						validations="validations.sex"
						desc="to jest opis pola sex"
                        availableopts="availableOpts.sex"
						updateon="blur"
                        listenon="random">
                        Sex:
                    </crud-input>
					
					<crud-input 
						type="text"
						name="pseudonym"
						model="person.pseudonym"
						errormessages="errorMessages.pseudonym"
						assignparams="assignParams.pseudonym"
						change="assign(assgnprms)" 
						valid="evalPattern(params)"
						validations="validations.pseudonym"
						desc="This field will be filled automatically by default once you fill fields 'name' and 'surname'. You can change its value"
						listenon="random">
						Pseudonym:
					</crud-input >
					
					<!--<div class="crud-formItem">
						<crud-label>Interestings:</crud-label>
						<fieldset class="group" ng-init="fieldsDefinitions.interestings=[{'id':'football', 'name':'Football'}, {'id':'poetry', 'name':'Poetry'}, {'id':'politicans', 'name':'Politicans'}]">
							<label ng-repeat="item in fieldsDefinitions.interestings">
								<input type="checkbox" name="interestings" ng-click="updateModelChbx(person.interestings, item.id)" ng-value="{{item.id}}" ng-checked="person.interestings.indexOf(item.id) > -1"> 
								{{item.name}}
							</label>
						</fieldset>
					</div>-->
					<crud-input
						type="checkbox"
						name="likeFootball"
						model="person.likeFootball"
						desc="Select if you like Football"
						errormessages="errorMessages.likeFootball"
						change="assign(assgnprms)" 
						assignparams="assignParams.likeFootball"
						valid="evalPattern(params)"
						validations="validations.likeFootball"
						listenon="random">
						Like football:
					</crud-input>
					
					<crud-input
						type="radio"
						name="vehicle"
						model="person.vehicle"
						desc="Select your vehicle"
						errormessages="errorMessages.vehicle"
						change="assign(assgnprms)" 
						assignparams="assignParams.vehicle"
						valid="evalPattern(params)"
						validations="validations.vehicle"
						availableopts="availableOpts.vehicle"
                        listenon="random">
						Vehicle:
					</crud-input>
					
					<!--<div class="crud-formItem">
						<crud-label>Advantages:</crud-label><br/>
						<select name="advantages" ng-model="person.advantages" ng-init="fieldsDefinitions.advantages=[{'id':'punctual', 'name':'Punctual'}, {'id':'conscientious', 'name':'Conscientious'}, {'id':'smart', 'name':'Smart'}]" multiple>
							<option ng-repeat="item in fieldsDefinitions.advantages" value="{{item.id}}">
								{{item.name}}
							</option>
							
						</select>
					</div>-->
                    
                    <crud-input
                        type="multiselect"
                        name="advantages"
                        model="person.advantages"
                        errormessages="errorMessages.advantages"
						assignparams="assignParams.advantages"
						change="assign(assgnprms)" 
						valid="evalPattern(params)"	
						validations="validations.advantages"
						desc="to jest opis pola advantages"
                        availableopts="availableOpts.advantages"
						updateon="blur"
                        listenon="random">
                        Advantages:
                    </crud-input>
					
					<crud-input 
						type="text"
						name="dateOfAffiliating"
						model="person.dateOfAffiliating"
						errormessages="errorMessages.dateOfAffiliating"
						assignparams="assignParams.dateOfAffiliating"
						change="assign(assgnprms)" 
						valid="evalPattern(params)"	
						validations="validations.dateOfAffiliating"
						desc="to jest opis pola dateOfAffiliating"
						updateon="blur"
                        listenon="random">
						Date of affiliating:
					</crud-input>
					
					<div class="bttns">
						<button class="btn btn-default" ng-click="toggleForm()">Cancel</button>
						<button class="btn btn-default" ng-click="savePerson()">Submit</button>
					</div>
				</form>
			</div>
            <div id="operations" class="form-inline">
                <label>rows number</label>
                <input class="form-control" id="rowsNr" type="number" />
                <button class="btn btn-default" ng-click="addPerson()" ng-hide="showForm">
                    <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
                    add record
                </button>
                <button class="btn btn-default">
                    <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
                    delete records
                </button>
            </div>
			<div id="tableContent">
				<table class="table table-striped">
					<thead>
						<tr>
							<th class="id">#</th>
							<th class="operationsColumn">Operations</th>
							<th>Name</th>
							<th>Surname</th>
							<th>Pesel</th>
							<th>Date of birth</th>
							<th>Salary</th>
							<th>Sex</th>
							<th>Pseudonym</th>
							<th>Like football</th>
							<th>Vehicle</th>
							<th>Advantages</th>
							<th>Date of affiliating</th>
						<tr>
					</thead>	
					<tbody>
						<tr ng-repeat="person in persons">
							<td class="id">{{$index+1}}</td>
							<td class="operationsColumn">
								<div class="form-inline ">
									<span class="bttns btn-group">
										<button class="btn btn-default" ng-click="editPerson(person.pesel)">
											<span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
										</button>
										<button class="btn btn-default" ng-click="deletePerson(person.pesel)">
											<span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
										</button>
									</span>
									<span class="checkbox">
										<input id="checkbox1" class="styled" type="checkbox">
										<label>
										</label>
									</span>
								</div>
							</td>
							<td>{{person.name}}</td>
							<td>{{person.surname}}</td>
							<td>{{person.pesel}}</td>
							<td>{{person.dateOfBirth}}</td>
							<td>{{person.salary}}</td>
							<td>{{person.sex}}</td>
							<td>{{person.pseudonym}}</td>
							<td>{{person.likeFootball | booleanToYesNo}}</td>
							<td>{{person.vehicle}}</td>
							<td>{{person.advantages}}</td><!-- | arrayToString -->
							<td>{{person.dateOfAffiliating}}</td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>
		
		<script>
			//Application configuration data (definitions of fields ect):
			
			$(document).ready(function() {
				$("#tableContent table thead td.operationsColumn").height($("#tableContent table thead").height()-12);
			});
			
			var crudErrors = {
				'delete': 'Internal error while deleting person',
				'update': 'Internal error while updating person',
				'add': 'Internal error while adding person',
			};
			
		</script>
		
		<script src="js/app.js"></script>
		<script src="js/filters.js"></script>
		<script src="js/services.js"></script>
		<script src="js/components.js"></script>
		<script src="js/controller.js"></script>
	</body> 
</html> 